<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sist.dao.emp-mapper">
	<!-- sql문장 제작 : PreparedStatement, ResultSet -->
	<!-- sql, select, update, delete, insert -->
	<select id="empListData" resultType="EmpVO">
		SELECT empno,ename,job,hiredate,sal,deptno
		FROM emp
	</select>
	<!-- 상세보기 -->
	<select id="empDetailData" resultType="EmpVO" parameterType="int">
		SELECT empno,ename,job,hiredate,sal,deptno
		FROM emp
		WHERE empno=#{empno}
	</select>
	<resultMap type="EmpVO" id="empMap">
		<result property="empno" column="empno"/>
		<result property="ename" column="ename"/>
		<result property="job" column="job"/>
		<result property="hiredate" column="hiredate"/>
		<result property="sal" column="sal"/>
		<result property="deptno" column="deptno"/>
		<result property="dvo.dname" column="dname"/>
		<result property="dvo.loc" column="loc"/>
	</resultMap>
	<sql id="join-sql">
		SELECT empno,ename,job,hiredate,sal,emp.deptno,dname,loc 
		FROM emp,dept
		WHERE emp.deptno = dept.deptno
	</sql>
	<select id="empDeptJoinData" resultMap="empMap">
		<include refid="join-sql"></include>
	</select>
	
	<select id="empDeptDetailData" resultMap="empMap" parameterType="int">
		SELECT empno,ename,job,hiredate,sal,emp.deptno,dname,loc 
		FROM emp,dept
		WHERE emp.deptno = dept.deptno
		AND empno=#{empno}
	</select>
</mapper>